<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="pro.mapper.IMonth">
    <insert id="insertMDemand" parameterType="pro.entity.Demand">
        insert into demand(demand_plancode,demand_plantype,demand_planname,demand_remarks,demand_department,
       demand_personne,demand_state,approval_status,demand_month,order_code) values(#{demandPlanCode},#{demandPlanType},#{demandPlanName},
        #{demandRemarks},#{demandDepartment},#{demandPerson},#{demandState},#{approval},#{demandMonth},#{orderCode})

    </insert>
    <select id="selectMByCode" resultMap="resultDemand" parameterType="Long">
       SELECT * from demand   LEFT JOIN orders on demand.demand_plancode=orders.demand_plancode
       where demand.demand_plancode=#{demandPlanCode};
    </select>
    <resultMap id="resultDemand" type="pro.entity.Demand">
        <id property="demandPlanCode" column="demand_plancode" javaType="Long"></id>
        <result property="demandPlanType" column="demand_plantype" javaType="int"></result>
        <result property="demandPlanName" column="demand_planname" javaType="String"></result>
        <result property="demandRemarks" column="demand_remarks" javaType="String"></result>
        <result property="demandDepartment" column="demand_department" javaType="String"></result>
        <result property="demandPerson" column="demand_personne" javaType="String"></result>
        <result property="demandState" column="demand_state" javaType="int"></result>
        <result property="approval" column="approval_status" javaType="int"></result>
        <result property="demandMonth" column="demand_month" javaType="int"></result>
        <result property="orderCode" column="order_code" javaType="Long"></result>
        <collection  property="ordersList" ofType="pro.entity.Orders" column="demand_plancode">
            <!--<result property="materialTypeCode" column="material_typecode"/>-->
            <!--<result property="materialTypeName" column="material_typename"/>-->
            <!--<result property="materialCode" column="material_code"/>-->
            <!--<result property="materialName" column="material_name"/>-->
            <!--<result property="materialSpe" column="material_spe"/>-->
            <!--<result property="materialType" column="material_type"/>-->
            <!--<result property="materialUnit" column="material_unit"/>-->
            <!--<result property="materialNum" column="material_num"/>-->
            <!--<result property="materialDemandMoth" column="material_dermandmoth"/>-->
            <!--<result property="materialDemandDate" column="material_dermanddate"/>-->
            <!--<result property="sourceSure" column="source_sure"/>-->
            <!--<result property="expectedSup" column="expected_sup"/>-->
            <!--<result property="fixedSup" column="fixed_sup"/>-->
            <!--<result property="remarks" column="remarks"/>-->
            <!--<result property="materialTrackCode" column="material_tracode"/>-->

        </collection>
    </resultMap>

</mapper>